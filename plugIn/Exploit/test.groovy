
import org.codehaus.groovy.runtime.memoize.Memoize
import org.jsoup.Jsoup
import org.jsoup.Connection.Method
import org.jsoup.nodes.Document

import attack.HttpRequestHandler
import bean.ExpResult

class Testa {
	def exp(Map param){
		String host = param.get("host");
		int port=param.get("port");
		if(port==443)
			host="https://"+host;
		if(port==80||port==0)
			host="http://"+host;
		HttpRequestHandler request =HttpRequestHandler.getInstance("test");
		ExpResult result=request.doRequest(host,Method.GET,null);
		if(result.statusCode==200){
			Document doc = Jsoup.parse(new ByteArrayInputStream(result.getEntity()),null,host);
			println doc.title()+"===="+host;
		}
	}
}
